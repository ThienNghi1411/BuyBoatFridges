(()=>{var c=class extends HTMLElement{constructor(){super();this.init(),this.product=JSON.parse(this.querySelector(".productCard_settings").innerText).data,this.preOrder=!1,this.querySelector('input[name="properties[preOrder]"]')&&(this.preOrder=!0)}init(){this.querySelector(".productCard__form").addEventListener("submit",s=>{s.preventDefault(),this.addToCart()})}getSectionInnerHTML(o){return new DOMParser().parseFromString(o,"text/html")}getSectionsToRender(){return[{section:"cart-quickview",selector:".cartQuickView"},{section:"cart-icon-bubble",selector:".header__myCart-qty"},{section:"cart-popup",selector:".cartPopupCont"}]}addToCart(){let o=document.querySelector(".spinnerAddToCart");o.style.display="block";let s={};this.preOrder?s={items:[{id:this.product.variants[0].id,quantity:1,properties:{preOrder:"true"}}],sections:this.getSectionsToRender().map(e=>e.section)}:s={items:[{id:this.product.variants[0].id,quantity:1}],sections:this.getSectionsToRender().map(e=>e.section)},fetch(window.Shopify.routes.root+"cart/add.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}).then(e=>e.json()).then(e=>{if(e.status){let t=document.querySelector(".cartPopUpError");t.style.display="block";let n=t.querySelector(".cartPopUpError__error");n.innerText=e.description;let i=document.querySelector("body");i.style.overflow="hidden"}else this.getSectionsToRender().forEach(t=>{if(t.selector===".cartPopupCont"){let n=new DOMParser,i=document.querySelector(".cartPopupCont"),r=n.parseFromString(e.sections[t.section],"text/html").querySelector(".cartPopup");r.setAttribute("data-qty",1),r.setAttribute("data-price",this.product.variants[0].price),r.setAttribute("data-img",this.product.featured_image),i.appendChild(r)}else document.querySelectorAll(t.selector).forEach(i=>{let r=this.getSectionInnerHTML(e.sections[t.section]);i.replaceWith(r.querySelector(t.selector))})});o.style.display="none"}).catch(e=>{console.error("Error:",e)})}};customElements.define("product-card",c);})();
