(()=>{var a=class extends HTMLElement{constructor(){super();this.addEventListener("click",e=>{console.log(this);let r=this.querySelector(".cartPage__removeBtn-spinner"),t=this.querySelector("svg");r.style.display="block",t.style.display="none",e.preventDefault(),this.closest("main-cart").updateQuantity(this.dataset.idproduct,0)})}};customElements.define("maincart-remove-button",a);var l=class extends HTMLElement{constructor(){super();this.addEventListener("click",e=>{let r=this.querySelector(".cartPage__removeBtn-spinner"),t=this.querySelector(".cartPage__clearCart");r.style.display="block",t.style.display="none",e.preventDefault(),this.closest("main-cart").cartClear()})}};customElements.define("maincart-remove-all-button",l);var d=class extends HTMLElement{constructor(){super();this.init()}init(){let e=this.querySelector(".cartPage__removeBtn-spinner"),r=this.querySelector(".cartPage__qtyField-spinnerCont"),t=this.dataset.idproduct,n=this.querySelectorAll(".cartPage__qtyField-plusBtn"),o=this.querySelectorAll(".cartPage__qtyField-minusBtn"),s=this.querySelector(".cartPage__qtyField-inputQty");n.forEach(c=>{c.addEventListener("click",()=>{r.style.display="flex",e.style.display="block",s.style.display="none",this.closest("main-cart").updateQuantity(t,s.value*1+1)})}),o.forEach(c=>{c.addEventListener("click",()=>{r.style.display="flex",e.style.display="block",s.style.display="none",this.closest("main-cart").updateQuantity(t,s.value*1-1)})}),s.addEventListener("change",()=>{let c=s.value;r.style.display="flex",e.style.display="block",s.style.display="none",this.closest("main-cart").updateQuantity(t,c*1)})}};customElements.define("maincart-qty-field",d);var u=class extends HTMLElement{constructor(){super()}init(){}getSectionsToRender(){return[{section:"cart-quickview",selector:".cartQuickView"},{section:"cart-icon-bubble",selector:".header__myCart-qty"},{section:"main-cart",selector:".cartPage"}]}updateQuantity(e,r){fetch(window.Shopify.routes.root+"cart/change.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({id:e,quantity:r,sections:this.getSectionsToRender().map(t=>t.section),sections_url:window.location.pathname})}).then(t=>t.json()).then(t=>{t.items.forEach(n=>{if(n.id===e*1&&r>n.quantity){let o=document.querySelector(".cartPopUpError");o.style.display="block";let s=o.querySelector(".cartPopUpError__error");s.innerText=`You can only add ${n.quantity} of this item to your cart.`}}),this.getSectionsToRender().forEach(n=>{let o=document.querySelector(n.selector),s=this.getSectionInnerHTML(t.sections[n.section]).querySelector(n.selector);o.replaceWith(s)})}).catch(t=>{console.error("Error:",t)})}getSectionInnerHTML(e){return new DOMParser().parseFromString(e,"text/html")}cartClear(){fetch(window.Shopify.routes.root+"cart/clear.js",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({sections:this.getSectionsToRender().map(e=>e.section),sections_url:window.location.pathname})}).then(e=>e.json()).then(e=>{this.getSectionsToRender().forEach(r=>{let t=document.querySelector(r.selector),n=this.getSectionInnerHTML(e.sections[r.section]).querySelector(r.selector);t.replaceWith(n)})}).catch(e=>{console.error("Error:",e)})}};customElements.define("main-cart",u);})();
