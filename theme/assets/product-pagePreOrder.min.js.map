{
  "version": 3,
  "sources": ["../../app/scripts/product-pagePreOrder.js"],
  "sourcesContent": ["// VARIABLES //\r\nconst minusBtn = document.querySelector(\".productPage__quantityCont-minusBtn\");\r\nconst plusBtn = document.querySelector(\".productPage__quantityCont-plusBtn\");\r\nconst qtyField = document.querySelector(\".productPage__quantityCont-inputQty\");\r\n// const qtyFieldQuickAdd = document.querySelector(\".quickAdd__inputField\");\r\nconst checkBox = document.querySelector(\".productPage__termConditions\");\r\n\r\nconst askingProduct = document.querySelector(\".productPage__askingPd\");\r\nconst askingPopup = document.querySelector(\".popupAsking\");\r\nconst askingPopUpDefault = document.querySelector(\".popupAsking__contentDefault\");\r\n\r\nconst shippingProduct = document.querySelector(\".productPage__shippingPd\");\r\nconst shippingPopup = document.querySelector(\".popupShipping\");\r\n\r\nconst body = document.querySelector(\"body\");\r\n// const btnPreOrders = document.querySelectorAll(\".productPage__btnPreOrder\");\r\n// const preOrderPopup = document.querySelector(\".popupPreOrder\");\r\n// const preOrderPopUpDefault = document.querySelector(\".popupPreOrder__contentDefault\");\r\nconst init = () => {\r\n    minusBtn.addEventListener(\"click\", adjustQty )\r\n    plusBtn.addEventListener(\"click\" , adjustQty );\r\n    // btnPreOrders.forEach(btnPreOrder => {\r\n    //     btnPreOrder.addEventListener(\"click\" , () => {\r\n    //         preOrderPopUpDefault.style.display=\"block\";\r\n    //         preOrderPopup.style.display = \"block\";\r\n    //         body.style.overflow=\"hidden\";\r\n    //     })\r\n    // })\r\n\r\n    // qtyFieldQuickAdd.addEventListener(\"change\" , () => {\r\n    //     qtyField.value = qtyFieldQuickAdd.value;\r\n    // })\r\n    checkBox.addEventListener(\"click\" , () => {\r\n        let box = checkBox.querySelector(\".productPage__termConditions-checkbox\");\r\n        let checkOutBtns = document.querySelectorAll(\".productPage__btnBuyNow\");\r\n        if (box.classList.contains(\"productPage__termConditions-checkboxActive\")){\r\n            box.classList.remove(\"productPage__termConditions-checkboxActive\");\r\n            checkOutBtns.forEach(checkOutBtn => {\r\n                checkOutBtn.style.opacity = \"0.5\";\r\n                checkOutBtn.style.pointerEvents = \"none\";\r\n            })\r\n        }else{\r\n            box.classList.add(\"productPage__termConditions-checkboxActive\");\r\n            checkOutBtns.forEach(checkOutBtn => {\r\n                checkOutBtn.style.opacity = \"1\";\r\n                checkOutBtn.style.pointerEvents = \"all\";\r\n            })\r\n        }\r\n    })\r\n    askingProduct.addEventListener(\"click\" , () => {\r\n        askingPopUpDefault.style.display=\"block\";\r\n        askingPopup.style.display = \"block\";\r\n        body.style.overflow=\"hidden\";\r\n    })\r\n    shippingProduct.addEventListener(\"click\" , () => {\r\n        shippingPopup.style.display = \"block\";\r\n        body.style.overflow=\"hidden\";\r\n    })\r\n}\r\n\r\n// FUNCTION //\r\n\r\nconst adjustQty = (e) => {\r\n    if (e.target.getAttribute(\"name\") === \"minus\"){\r\n        if(qtyField.value*1 > 1)\r\n        qtyField.value = qtyField.value*1 - 1;\r\n        // qtyFieldQuickAdd.value = qtyField.value;\r\n    }else{\r\n        qtyField.value = qtyField.value*1 + 1;\r\n        // qtyFieldQuickAdd.value = qtyField.value;\r\n    }\r\n}\r\n\r\ninit();\r\n\r\n\r\n// CART-POPUP //\r\n\r\n// Add to Cart //\r\n\r\nconst productData = JSON.parse(document.querySelector(\"#productPage__settings\").innerText).product;\r\nconst pdQty = JSON.parse(document.querySelector(\"#productPage__settings\").innerText).pdQuantity;\r\n\r\nconst addToCartForms = document.querySelectorAll('.productForm');\r\nconsole.log(addToCartForms);\r\nconst spinner = document.querySelector(\".loading__spinner\");\r\n\r\n\r\n\r\nconst getSectionsToRender = () => {\r\n    return [\r\n        {\r\n            section: 'cart-quickview',\r\n            selector: '.cartQuickView',\r\n        },\r\n        {\r\n            section: 'cart-icon-bubble',\r\n            selector: '.header__myCart-qty'\r\n        },\r\n        {\r\n            section: 'cart-popup',\r\n            selector: '.cartPopupCont'\r\n        }\r\n    ];\r\n}\r\n\r\nconst getSectionInnerHTML = (html) => {\r\n    return new DOMParser()\r\n          .parseFromString(html, 'text/html');\r\n         \r\n}\r\naddToCartForms.forEach(addToCartForm => {\r\n    let id = addToCartForm.querySelector('input[name=\"id\"]').value;\r\n    let quantity = addToCartForm.querySelector('input[name=\"quantity\"]').value;\r\n    let productUrl = `/products/${productData.handle}`;\r\n    let formData = {\r\n        'items': [{\r\n            'id': id,\r\n            'quantity': quantity,\r\n            'properties': {\r\n                'preOrder': true\r\n            }\r\n         }],\r\n        'sections': getSectionsToRender().map((section) => section.section) ,\r\n        'sections_url' : productUrl\r\n    };\r\n    addToCartForm.addEventListener(\"submit\" , e => addToCart(e,formData));\r\n})\r\n\r\nconst addToCart = (e,formData) => {\r\n    e.preventDefault();\r\n    spinner.style.display=\"block\";\r\n    console.log(formData);\r\n    fetch(window.Shopify.routes.root + 'cart/add.js', {\r\n        method: 'POST',\r\n        headers: {\r\n            'Content-Type': 'application/json'\r\n        },\r\n        body: JSON.stringify(formData)\r\n    })\r\n    .then(response => {\r\n        return response.json();\r\n    })\r\n    .then(data => {\r\n        console.log(data);\r\n        spinner.style.display=\"none\";\r\n        if (data.status){\r\n            let popupError = document.querySelector(\".cartPopUpError\");\r\n            popupError.style.display=\"block\";\r\n            let errorText = popupError.querySelector(\".cartPopUpError__error\");\r\n            errorText.innerText=data.description;\r\n            body.style.overflow= \"hidden\";\r\n        }else{\r\n            getSectionsToRender().forEach((section => {\r\n                if (section.selector === \".cartPopupCont\"){\r\n                    const parser = new DOMParser();\r\n                    let elementToAppend = document.querySelector(\".cartPopupCont\");\r\n                    let domToAdd = parser.parseFromString(data.sections[section.section],'text/html').querySelector(\".cartPopup\");\r\n                    domToAdd.setAttribute(\"data-qty\",qtyField.value);\r\n                    elementToAppend.appendChild(domToAdd);\r\n                }else{\r\n                    const elementToReplaces =\r\n                    document.querySelectorAll(section.selector);\r\n                    elementToReplaces.forEach(elementToReplace => {\r\n                        const domReplace = getSectionInnerHTML((data.sections[section.section]))\r\n                        elementToReplace.replaceWith(domReplace.querySelector(section.selector));\r\n                    })\r\n                   \r\n                }\r\n            }));\r\n        }\r\n       \r\n        \r\n\r\n    })\r\n    .catch((error) => {\r\n        console.error('Error:', error);\r\n    });\r\n};\r\n"],
  "mappings": "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",
  "names": []
}
